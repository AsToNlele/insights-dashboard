import VulnerabilityCard from './VulnerabilityCard';
import Loading from '../../PresentationalComponents/Loading/Loading';
import { cvesInterceptors } from '../../../cypress/support/interceptors';
import Masonry from 'react-masonry-css';

before(() => {
    cy.mockWindowChrome();
});

const breakpointColumnsObj = {
    default: 2,
    992: 1
};

describe('Dashboard CVES', () => {
    beforeEach(() => {
        cvesInterceptors.successful();
        cy.mountWithContext(
            VulnerabilityCard,
            Loading,
            Masonry,
            { breakpointCols: breakpointColumnsObj,
                className: 'ins-l-masonry',
                columnClassName: 'ins-l-masonry_column' },
            true);});
    it('the text in the header is correct', () => {
        cy.get('div[class="pf-c-content insd-c-width-limiter"]')
        .should('have.text',
            'Red Hat recommends addressing these CVEs with high priority due to heightened risk associated with these security issues');
    });
    it('the first metrics is correct ', () => {
        cy.get('div[class="insd-c-dashboard__card--Vulnerabilities--SplitMetrics__item"]')
        .eq(0).should('have.text', '56CVEs with security rules impacting 1 or more systemsView CVEs');
    });
    //DO THE SAME TEST AS ABOVE BUT FOR THE SECOND METRIC
});
